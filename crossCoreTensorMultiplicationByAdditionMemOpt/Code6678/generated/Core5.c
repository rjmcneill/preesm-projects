/** 
 * @file Core5.c
 * @generated by C6678CPrinter
 * @date Sun Apr 19 17:07:05 BST 2015
 */
 

#include "cores.h"
#include "utils.h"
#include "communication.h"
#include "fifo.h"
#include "cache.h"

// Core Global Declaration
extern char *const explode_generateTensors_arra__60;  // explode_generateTensors_arrayB > multiplyTensors_50 size:= 131072*char defined in Core0
extern char *const explode_generateTensors_arra__47;  // explode_generateTensors_arrayB > multiplyTensors_33 size:= 131072*char defined in Core0
extern char *const explode_generateTensors_arra__39;  // explode_generateTensors_arrayB > multiplyTensors_24 size:= 131072*char defined in Core0
extern char *const explode_transposeTensor_3_ou__0;  // explode_transposeTensor_3_output > multiplyTensors_24 size:= 131072*char defined in Core0
extern char *const explode_transposeTensor_4_ou__7;  // explode_transposeTensor_4_output > multiplyTensors_33 size:= 131072*char defined in Core0
extern char *const explode_transposeTensor_6_ou__6;  // explode_transposeTensor_6_output > multiplyTensors_50 size:= 131072*char defined in Core0
extern int *const output_0__arrayA__1;  // explode_transposeTensor_3_output_output_0 > multiplyTensors_24_arrayA size:= 32768*int defined in Core0
extern int *const arrayB_786432__arrayB__0;  // explode_generateTensors_arrayB_arrayB_786432 > multiplyTensors_24_arrayB size:= 32768*int defined in Core0
extern long *const arrayC__input_0__7;  // multiplyTensors_24_arrayC > implode_sumResults_3_input_input_0 size:= 262144*long defined in Core0
extern char *const multiplyTensors_25__implode___0;  // multiplyTensors_25 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_26__implode___0;  // multiplyTensors_26 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_27__implode___0;  // multiplyTensors_27 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_28__implode___0;  // multiplyTensors_28 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_29__implode___0;  // multiplyTensors_29 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_30__implode___0;  // multiplyTensors_30 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_31__implode___0;  // multiplyTensors_31 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern int *const output_32768__arrayA__7;  // explode_transposeTensor_4_output_output_32768 > multiplyTensors_33_arrayA size:= 32768*int defined in Core0
extern int *const arrayB_1081344__arrayB__0;  // explode_generateTensors_arrayB_arrayB_1081344 > multiplyTensors_33_arrayB size:= 32768*int defined in Core0
extern long *const arrayC__input_262144__0;  // multiplyTensors_33_arrayC > implode_sumResults_4_input_input_262144 size:= 262144*long defined in Core0
extern char *const multiplyTensors_33__implode___0;  // multiplyTensors_33 > implode_sumResults_4_input size:= 1048576*char defined in Core0
extern int *const output_65536__arrayA__5;  // explode_transposeTensor_6_output_output_65536 > multiplyTensors_50_arrayA size:= 32768*int defined in Core0
extern int *const arrayB_1638400__arrayB__0;  // explode_generateTensors_arrayB_arrayB_1638400 > multiplyTensors_50_arrayB size:= 32768*int defined in Core0
extern long *const arrayC__input_524288__3;  // multiplyTensors_50_arrayC > implode_sumResults_6_input_input_524288 size:= 262144*long defined in Core0
extern char *const multiplyTensors_50__implode___0;  // multiplyTensors_50 > implode_sumResults_6_input size:= 1048576*char defined in Core0
extern long *const arrayC__input_262144__5;  // multiplyTensors_25_arrayC > implode_sumResults_3_input_input_262144 size:= 262144*long defined in Core0
extern long *const arrayC__input_524288__0;  // multiplyTensors_26_arrayC > implode_sumResults_3_input_input_524288 size:= 262144*long defined in Core0
extern long *const arrayC__input_786432__1;  // multiplyTensors_27_arrayC > implode_sumResults_3_input_input_786432 size:= 262144*long defined in Core0
extern long *const arrayC__input_1048576__0;  // multiplyTensors_28_arrayC > implode_sumResults_3_input_input_1048576 size:= 262144*long defined in Core0
extern long *const arrayC__input_1310720__5;  // multiplyTensors_29_arrayC > implode_sumResults_3_input_input_1310720 size:= 262144*long defined in Core0
extern long *const arrayC__input_1572864__1;  // multiplyTensors_30_arrayC > implode_sumResults_3_input_input_1572864 size:= 262144*long defined in Core0
extern long *const arrayC__input_1835008__3;  // multiplyTensors_31_arrayC > implode_sumResults_3_input_input_1835008 size:= 262144*long defined in Core0
extern long *const arrayC__input__6;  // implode_sumResults_3_input_arrayC > sumResults_3_input size:= 2097152*long defined in Core0
extern long *const output__arrayC_786432__0;  // sumResults_3_output > implode_displayTensor_arrayC_arrayC_786432 size:= 262144*long defined in Core0
extern char *const sumResults_3__implode_displa__0;  // sumResults_3 > implode_displayTensor_arrayC size:= 1048576*char defined in Core0

// Core Global Definitions

void core5(void){
	// Initialisation(s)
	communicationInit();

	// Begin the execution loop 
	while(1){
		busy_barrier();
		receiveStart(); // Core7 > Core5: explode_generateTensors_arra__60 
		receiveEnd(7); // Core7 > Core5: explode_generateTensors_arra__60 
		cache_inv(explode_generateTensors_arra__60, 131072*sizeof(char));
		receiveStart(); // Core7 > Core5: explode_generateTensors_arra__47 
		receiveEnd(7); // Core7 > Core5: explode_generateTensors_arra__47 
		cache_inv(explode_generateTensors_arra__47, 131072*sizeof(char));
		receiveStart(); // Core7 > Core5: explode_generateTensors_arra__39 
		receiveEnd(7); // Core7 > Core5: explode_generateTensors_arra__39 
		cache_inv(explode_generateTensors_arra__39, 131072*sizeof(char));
		receiveStart(); // Core3 > Core5: explode_transposeTensor_3_ou__0 
		receiveEnd(3); // Core3 > Core5: explode_transposeTensor_3_ou__0 
		cache_inv(explode_transposeTensor_3_ou__0, 131072*sizeof(char));
		receiveStart(); // Core6 > Core5: explode_transposeTensor_4_ou__7 
		receiveEnd(6); // Core6 > Core5: explode_transposeTensor_4_ou__7 
		cache_inv(explode_transposeTensor_4_ou__7, 131072*sizeof(char));
		receiveStart(); // Core0 > Core5: explode_transposeTensor_6_ou__6 
		receiveEnd(0); // Core0 > Core5: explode_transposeTensor_6_ou__6 
		cache_inv(explode_transposeTensor_6_ou__6, 131072*sizeof(char));
		multiply(512/*rowsA*/,512/*columnsA*/,8/*depthA*/,512/*rowsB*/,512/*columnsB*/,8/*depthB*/,output_0__arrayA__1,arrayB_786432__arrayB__0,arrayC__input_0__7); // multiplyTensors_24
		cache_inv(output_0__arrayA__1, 32768*sizeof(int));
		cache_inv(arrayB_786432__arrayB__0, 32768*sizeof(int));
		receiveStart(); // Core3 > Core5: multiplyTensors_25__implode___0 
		receiveEnd(3); // Core3 > Core5: multiplyTensors_25__implode___0 
		cache_inv(multiplyTensors_25__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core0 > Core5: multiplyTensors_26__implode___0 
		receiveEnd(0); // Core0 > Core5: multiplyTensors_26__implode___0 
		cache_inv(multiplyTensors_26__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core2 > Core5: multiplyTensors_27__implode___0 
		receiveEnd(2); // Core2 > Core5: multiplyTensors_27__implode___0 
		cache_inv(multiplyTensors_27__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core1 > Core5: multiplyTensors_28__implode___0 
		receiveEnd(1); // Core1 > Core5: multiplyTensors_28__implode___0 
		cache_inv(multiplyTensors_28__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core1 > Core5: multiplyTensors_29__implode___0 
		receiveEnd(1); // Core1 > Core5: multiplyTensors_29__implode___0 
		cache_inv(multiplyTensors_29__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core3 > Core5: multiplyTensors_30__implode___0 
		receiveEnd(3); // Core3 > Core5: multiplyTensors_30__implode___0 
		cache_inv(multiplyTensors_30__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core6 > Core5: multiplyTensors_31__implode___0 
		receiveEnd(6); // Core6 > Core5: multiplyTensors_31__implode___0 
		cache_inv(multiplyTensors_31__implode___0, 1048576*sizeof(char));
		multiply(512/*rowsA*/,512/*columnsA*/,8/*depthA*/,512/*rowsB*/,512/*columnsB*/,8/*depthB*/,output_32768__arrayA__7,arrayB_1081344__arrayB__0,arrayC__input_262144__0); // multiplyTensors_33
		cache_inv(output_32768__arrayA__7, 32768*sizeof(int));
		cache_inv(arrayB_1081344__arrayB__0, 32768*sizeof(int));
		cache_wbInv(multiplyTensors_33__implode___0, 1048576*sizeof(char));
		sendStart(4); // Core5 > Core4: multiplyTensors_33__implode___0 
		sendEnd(); // Core5 > Core4: multiplyTensors_33__implode___0 
		multiply(512/*rowsA*/,512/*columnsA*/,8/*depthA*/,512/*rowsB*/,512/*columnsB*/,8/*depthB*/,output_65536__arrayA__5,arrayB_1638400__arrayB__0,arrayC__input_524288__3); // multiplyTensors_50
		cache_inv(output_65536__arrayA__5, 32768*sizeof(int));
		cache_inv(arrayB_1638400__arrayB__0, 32768*sizeof(int));
		cache_wbInv(multiplyTensors_50__implode___0, 1048576*sizeof(char));
		sendStart(7); // Core5 > Core7: multiplyTensors_50__implode___0 
		sendEnd(); // Core5 > Core7: multiplyTensors_50__implode___0 
		// Join implode_sumResults_3_input
		{
			cache_wb(arrayC__input_0__7, 262144*sizeof(long));
			memcpy((void*)(arrayC__input__6+262144),(void*)( arrayC__input_262144__5+0), 262144*sizeof(long));
			cache_wb(arrayC__input_524288__0, 262144*sizeof(long));
			memcpy((void*)(arrayC__input__6+786432),(void*)( arrayC__input_786432__1+0), 262144*sizeof(long));
			cache_wb(arrayC__input_1048576__0, 262144*sizeof(long));
			memcpy((void*)(arrayC__input__6+1310720),(void*)( arrayC__input_1310720__5+0), 262144*sizeof(long));
			cache_wb(arrayC__input_1572864__1, 262144*sizeof(long));
			memcpy((void*)(arrayC__input__6+1835008),(void*)( arrayC__input_1835008__3+0), 262144*sizeof(long));
		}
		cache_wb(((char*)arrayC__input_0__7) + 0, 1048576);
		cache_inv(arrayC__input_0__7, 262144*sizeof(long));
		cache_inv(arrayC__input_262144__5, 262144*sizeof(long));
		cache_wb(((char*)arrayC__input_524288__0) + 0, 1048576);
		cache_inv(arrayC__input_524288__0, 262144*sizeof(long));
		cache_inv(arrayC__input_786432__1, 262144*sizeof(long));
		cache_wb(((char*)arrayC__input_1048576__0) + 0, 1048576);
		cache_inv(arrayC__input_1048576__0, 262144*sizeof(long));
		cache_inv(arrayC__input_1310720__5, 262144*sizeof(long));
		cache_wb(((char*)arrayC__input_1572864__1) + 0, 1048576);
		cache_inv(arrayC__input_1572864__1, 262144*sizeof(long));
		cache_inv(arrayC__input_1835008__3, 262144*sizeof(long));
		sum(512/*rowsA*/,512/*columnsB*/,8/*depthA*/,arrayC__input__6,output__arrayC_786432__0); // sumResults_3
		cache_inv(arrayC__input__6, 2097152*sizeof(long));
		cache_wbInv(sumResults_3__implode_displa__0, 1048576*sizeof(char));
		sendStart(1); // Core5 > Core1: sumResults_3__implode_displa__0 
		sendEnd(); // Core5 > Core1: sumResults_3__implode_displa__0 
	}
}
