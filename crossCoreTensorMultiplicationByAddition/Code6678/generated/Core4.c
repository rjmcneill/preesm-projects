/** 
 * @file Core4.c
 * @generated by C6678CPrinter
 * @date Tue Mar 31 21:38:20 BST 2015
 */
 

#include "cores.h"
#include "utils.h"
#include "communication.h"
#include "fifo.h"
#include "cache.h"

// Core Global Declaration
extern char *const explode_generateTensors_arra__24;  // explode_generateTensors_arrayB > multiplyTensors_29 size:= 131072*char defined in Core0
extern char *const explode_generateTensors_arra__43;  // explode_generateTensors_arrayB > multiplyTensors_18 size:= 131072*char defined in Core0
extern char *const explode_transposeTensor_2_ou__4;  // explode_transposeTensor_2_output > multiplyTensors_18 size:= 131072*char defined in Core0
extern char *const explode_transposeTensor_3_ou__4;  // explode_transposeTensor_3_output > multiplyTensors_29 size:= 131072*char defined in Core0
extern char *const multiplyTensors_16__implode___0;  // multiplyTensors_16 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_17__implode___0;  // multiplyTensors_17 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern int *const output_65536__arrayA__1;  // explode_transposeTensor_2_output_output_65536 > multiplyTensors_18_arrayA size:= 32768*int defined in Core0
extern int *const arrayB_589824__arrayB__0;  // explode_generateTensors_arrayB_arrayB_589824 > multiplyTensors_18_arrayB size:= 32768*int defined in Core0
extern long *const arrayC__input_524288__4;  // multiplyTensors_18_arrayC > implode_sumResults_2_input_input_524288 size:= 262144*long defined in Core0
extern char *const multiplyTensors_19__implode___0;  // multiplyTensors_19 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_20__implode___0;  // multiplyTensors_20 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_21__implode___0;  // multiplyTensors_21 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_22__implode___0;  // multiplyTensors_22 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern char *const multiplyTensors_23__implode___0;  // multiplyTensors_23 > implode_sumResults_2_input size:= 1048576*char defined in Core0
extern int *const output_163840__arrayA__5;  // explode_transposeTensor_3_output_output_163840 > multiplyTensors_29_arrayA size:= 32768*int defined in Core0
extern int *const arrayB_950272__arrayB__0;  // explode_generateTensors_arrayB_arrayB_950272 > multiplyTensors_29_arrayB size:= 32768*int defined in Core0
extern long *const arrayC__input_1310720__5;  // multiplyTensors_29_arrayC > implode_sumResults_3_input_input_1310720 size:= 262144*long defined in Core0
extern char *const multiplyTensors_29__implode___0;  // multiplyTensors_29 > implode_sumResults_3_input size:= 1048576*char defined in Core0
extern long *const arrayC__input_0__3;  // multiplyTensors_16_arrayC > implode_sumResults_2_input_input_0 size:= 262144*long defined in Core0
extern long *const arrayC__input_262144__6;  // multiplyTensors_17_arrayC > implode_sumResults_2_input_input_262144 size:= 262144*long defined in Core0
extern long *const arrayC__input_786432__7;  // multiplyTensors_19_arrayC > implode_sumResults_2_input_input_786432 size:= 262144*long defined in Core0
extern long *const arrayC__input_1048576__1;  // multiplyTensors_20_arrayC > implode_sumResults_2_input_input_1048576 size:= 262144*long defined in Core0
extern long *const arrayC__input_1310720__1;  // multiplyTensors_21_arrayC > implode_sumResults_2_input_input_1310720 size:= 262144*long defined in Core0
extern long *const arrayC__input_1572864__0;  // multiplyTensors_22_arrayC > implode_sumResults_2_input_input_1572864 size:= 262144*long defined in Core0
extern long *const arrayC__input_1835008__5;  // multiplyTensors_23_arrayC > implode_sumResults_2_input_input_1835008 size:= 262144*long defined in Core0
extern long *const arrayC__input__3;  // implode_sumResults_2_input_arrayC > sumResults_2_input size:= 2097152*long defined in Core0
extern long *const output__arrayC_524288__0;  // sumResults_2_output > implode_displayTensor_arrayC_arrayC_524288 size:= 262144*long defined in Core0
extern char *const sumResults_2__implode_displa__0;  // sumResults_2 > implode_displayTensor_arrayC size:= 1048576*char defined in Core0

// Core Global Definitions

void core4(void){
	// Initialisation(s)
	communicationInit();

	// Begin the execution loop 
	while(1){
		busy_barrier();
		receiveStart(); // Core0 > Core4: explode_generateTensors_arra__24 
		receiveEnd(0); // Core0 > Core4: explode_generateTensors_arra__24 
		cache_inv(explode_generateTensors_arra__24, 131072*sizeof(char));
		receiveStart(); // Core0 > Core4: explode_generateTensors_arra__43 
		receiveEnd(0); // Core0 > Core4: explode_generateTensors_arra__43 
		cache_inv(explode_generateTensors_arra__43, 131072*sizeof(char));
		receiveStart(); // Core0 > Core4: explode_transposeTensor_2_ou__4 
		receiveEnd(0); // Core0 > Core4: explode_transposeTensor_2_ou__4 
		cache_inv(explode_transposeTensor_2_ou__4, 131072*sizeof(char));
		receiveStart(); // Core7 > Core4: explode_transposeTensor_3_ou__4 
		receiveEnd(7); // Core7 > Core4: explode_transposeTensor_3_ou__4 
		cache_inv(explode_transposeTensor_3_ou__4, 131072*sizeof(char));
		receiveStart(); // Core0 > Core4: multiplyTensors_16__implode___0 
		receiveEnd(0); // Core0 > Core4: multiplyTensors_16__implode___0 
		cache_inv(multiplyTensors_16__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core0 > Core4: multiplyTensors_17__implode___0 
		receiveEnd(0); // Core0 > Core4: multiplyTensors_17__implode___0 
		cache_inv(multiplyTensors_17__implode___0, 1048576*sizeof(char));
		multiply(512/*rowsA*/,512/*columnsA*/,8/*depthA*/,512/*rowsB*/,512/*columnsB*/,8/*depthB*/,output_65536__arrayA__1,arrayB_589824__arrayB__0,arrayC__input_524288__4); // multiplyTensors_18
		cache_inv(output_65536__arrayA__1, 32768*sizeof(int));
		cache_inv(arrayB_589824__arrayB__0, 32768*sizeof(int));
		receiveStart(); // Core5 > Core4: multiplyTensors_19__implode___0 
		receiveEnd(5); // Core5 > Core4: multiplyTensors_19__implode___0 
		cache_inv(multiplyTensors_19__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core6 > Core4: multiplyTensors_20__implode___0 
		receiveEnd(6); // Core6 > Core4: multiplyTensors_20__implode___0 
		cache_inv(multiplyTensors_20__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core2 > Core4: multiplyTensors_21__implode___0 
		receiveEnd(2); // Core2 > Core4: multiplyTensors_21__implode___0 
		cache_inv(multiplyTensors_21__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core1 > Core4: multiplyTensors_22__implode___0 
		receiveEnd(1); // Core1 > Core4: multiplyTensors_22__implode___0 
		cache_inv(multiplyTensors_22__implode___0, 1048576*sizeof(char));
		receiveStart(); // Core3 > Core4: multiplyTensors_23__implode___0 
		receiveEnd(3); // Core3 > Core4: multiplyTensors_23__implode___0 
		cache_inv(multiplyTensors_23__implode___0, 1048576*sizeof(char));
		multiply(512/*rowsA*/,512/*columnsA*/,8/*depthA*/,512/*rowsB*/,512/*columnsB*/,8/*depthB*/,output_163840__arrayA__5,arrayB_950272__arrayB__0,arrayC__input_1310720__5); // multiplyTensors_29
		cache_inv(output_163840__arrayA__5, 32768*sizeof(int));
		cache_inv(arrayB_950272__arrayB__0, 32768*sizeof(int));
		cache_wbInv(multiplyTensors_29__implode___0, 1048576*sizeof(char));
		sendStart(7); // Core4 > Core7: multiplyTensors_29__implode___0 
		sendEnd(); // Core4 > Core7: multiplyTensors_29__implode___0 
		// Join implode_sumResults_2_input
		{
			memcpy((void*)(arrayC__input__3+0),(void*)( arrayC__input_0__3+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+262144),(void*)( arrayC__input_262144__6+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+524288),(void*)( arrayC__input_524288__4+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+786432),(void*)( arrayC__input_786432__7+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+1048576),(void*)( arrayC__input_1048576__1+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+1310720),(void*)( arrayC__input_1310720__1+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+1572864),(void*)( arrayC__input_1572864__0+0), 262144*sizeof(long));
			memcpy((void*)(arrayC__input__3+1835008),(void*)( arrayC__input_1835008__5+0), 262144*sizeof(long));
		}
		cache_inv(arrayC__input_0__3, 262144*sizeof(long));
		cache_inv(arrayC__input_262144__6, 262144*sizeof(long));
		cache_inv(arrayC__input_524288__4, 262144*sizeof(long));
		cache_inv(arrayC__input_786432__7, 262144*sizeof(long));
		cache_inv(arrayC__input_1048576__1, 262144*sizeof(long));
		cache_inv(arrayC__input_1310720__1, 262144*sizeof(long));
		cache_inv(arrayC__input_1572864__0, 262144*sizeof(long));
		cache_inv(arrayC__input_1835008__5, 262144*sizeof(long));
		sum(512/*rowsA*/,512/*columnsB*/,8/*depthA*/,arrayC__input__3,output__arrayC_524288__0); // sumResults_2
		cache_inv(arrayC__input__3, 2097152*sizeof(long));
		cache_wbInv(sumResults_2__implode_displa__0, 1048576*sizeof(char));
		sendStart(6); // Core4 > Core6: sumResults_2__implode_displa__0 
		sendEnd(); // Core4 > Core6: sumResults_2__implode_displa__0 
	}
}
